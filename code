import tkinter as tk
from tkinter import ttk
from transformers import pipeline

# Load Hugging Face sentiment analysis pipeline (downloads model the first time)
sentiment_analyzer = pipeline("sentiment-analysis")

class SentimentApp:
    def _init_(self, root):
        root.title("Restaurant Review Sentiment Analysis (Hugging Face)")
        root.geometry("700x350")
        root.resizable(False, False)

        ttk.Label(root, text="Enter your restaurant review:", font=("Arial", 14)).pack(pady=15)

        self.text = tk.Text(root, height=6, width=70, font=("Arial", 12))
        self.text.pack()

        self.button = ttk.Button(root, text="Analyze Sentiment", command=self.classify)
        self.button.pack(pady=15)

        self.result_label = ttk.Label(root, text="", font=("Arial", 16, "bold"))
        self.result_label.pack()

    def classify(self):
        review = self.text.get("1.0", "end-1c").strip()
        if not review:
            self.result_label.config(text="Please enter a review.", foreground="orange")
            return
        try:
            result = sentiment_analyzer(review)[0]  # returns a dict {label: ..., score: ...}
            label = result['label']
            score = result['score']
            color = "green" if label == "POSITIVE" else "red"
            self.result_label.config(
                text=f"Sentiment: {label.capitalize()} (Confidence: {score:.2f})",
                foreground=color
            )
        except Exception as e:
            self.result_label.config(text=f"Error: {str(e)}", foreground="red")

if _name_ == "_main_":
    root = tk.Tk()
    app = SentimentApp(root)
    root.mainloop()
